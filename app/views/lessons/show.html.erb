
<div class="">

  <!-- Lessons Sidebar -->
  <div id="mySidenav" class="sidenav top-margin">
    <%= render :partial => 'lessons/sidebar' %>
  </div>

  <div id="main" class="">
    <!-- This is the button to open the sidenav -->
    <!-- the button to close is on the _sidebar.html.erb file -->
    <span class="fixed-sidemenu top-margin" onclick="openNav()">&#9776<div class="text-right div-relative flexbox">
    </div></span>

      <!-- Add all page content inside this div if you want the side nav to push page content to the right (not used if you only want the sidenav to sit on top of the page -->
      <!-- Lesson Content -->
      <div id="lesson-content">

        <!-- Lesson Title and Score -->
        <div class="flexbox">
          <div class="text-left flex-item-lesson-show-title">
            <p class=""><%= @lesson.title %></p>
          </div>

          <div class="text-right flex-item-grow bottom-border">
            <p class="">本节得分：5/5</p>
          </div>
        </div>

        <!-- Lesson Text -->
        <div class="">
          <%= raw(@lesson.text) %>
        </div>

        <!-- Quiz -->
        <span>session: </span>
        <%= @session %>
        <span>session ID: </span>
        <%= @session.id %>
        <span>current session: </span>

        <% if @lesson.lesson_type == "quiz" %>

          <p>You're about to begin a quiz....</p>

          <%= link_to "Begin Quiz", course_lesson_quiz_path(@course.id, @lesson.id), class: "btn btn-warning text-center" %>

          <%= simple_form_for [@course, @lesson, @quiz] do |f| %>
            <%= f.button :submit, 'Begin Quiz', class: 'btn btn-success text-center' %>
          <% end %>

          <%= simple_form_for [@course, @lesson, @session] do |f| %>
            <%= f.button :submit, 'Just Finished the Lesson', class: 'btn btn-success text-center' %>
          <% end %>


        <% end %>


        <!-- <h4 class="text-center"><#%= @lesson.description %></h4> -->
        <!-- <div class="text-center">
          <#% if @lesson.video? %>
            <#%= @lesson.video.html_safe %>
          <#% end %>
        </div> -->


        <!-- Lesson Complete Button -->
        <div class="section-margin hidden-xs">
        <% if @current_session.exists? %>

          <div class="row">
            <div class="col-xs-6">
            <%= simple_form_for [@course, @lesson, @session] do |f| %>
              <%= f.button :submit, 'Done with this Lesson! :)', disabled: "disabled", class: 'btn btn-success text-center' %>
            <% end %>
            </div>

            <!-- removes 'next lesson' button if lesson is last lesson of course -->
            <% unless @course.lessons.last.id == @lesson.id %>
              <div class="col-xs-6 text-right">
              <%= link_to "Next Lesson: #{Lesson.find(@lesson.id + 1).title}", course_lesson_path(@course.id, @lesson.id + 1), class: "btn btn-primary text-center" %>
              </div>
            <% end %>
          </div>

        <% else %>

          <div class="row">
            <div class="col-xs-6">
              <%= simple_form_for [@course, @lesson, @session] do |f| %>
                <%= f.button :submit, 'Just Finished the Lesson', class: 'btn btn-success text-center' %>
              <% end %>
            </div>

            <!-- removes 'next lesson' button if lesson is last lesson of course -->
            <% unless @course.lessons.last.id == @lesson.id %>
              <div class="col-xs-6 text-right">
              <%= link_to "Next Lesson: #{Lesson.find(@lesson.id + 1).title}", course_lesson_path(@course.id, @lesson.id + 1), class: "btn btn-primary text-center" %>
              </div>
            <% end %>
          </div>

        <% end %>
        </div>

        <!-- mobile button -->
        <div class="section-margin visible-xs">
        <% if @current_session.exists? %>
            <div class="row">
              <div class="col-xs-6">
              <%= simple_form_for [@course, @lesson, @session] do |f| %>
                <%= f.button :submit, 'Done with this Lesson! :)', disabled: "disabled", class: 'btn btn-success text-center' %>
              <% end %>
              </div>
              <div class="col-xs-6 text-right">

              <%= link_to "Next Lesson", course_lesson_path(@course.id, @lesson.id + 1), class: "btn btn-primary text-center" %>

              <!-- mobile button -->
              </div>
            </div>
          <% else %>
            <div class="row">
              <div class="col-xs-6">
              <%= simple_form_for [@course, @lesson, @session] do |f| %>
              <%= f.button :submit, 'Lesson Finished', class: 'btn btn-success text-center' %>
            <% end %>
              </div>
              <div class="col-xs-6 text-right">

              <%= link_to "Next Lesson", course_lesson_path(@course.id, @lesson.id + 1), class: "btn btn-primary text-center" %>
              </div>
            </div>


          <% end %>
        </div>

      </div>




</div>
